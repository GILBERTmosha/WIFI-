<!DOCTYPE html>
<html lang="sw">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MOSHARUTH WiFi - Cloud Live</title>

<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

<style>
body{font-family:Arial,sans-serif;background:#0f172a;color:#fff;margin:0;padding:10px}
.container{max-width:400px;margin:auto;background:#111;padding:20px;border-radius:15px;box-shadow:0 0 20px gold}
h2{text-align:center;color:gold;margin-bottom:20px}
input,button{width:100%;padding:12px;margin-top:10px;border-radius:8px;border:none;box-sizing:border-box}
input{background:#222;color:white;border:1px solid #333}
button{background:gold;color:black;font-weight:bold;cursor:pointer;font-size:16px}
.hidden{display:none}
.card{background:#1e293b;padding:15px;border-radius:10px;margin-top:15px;border-left:5px solid gold}
.flex{display:flex;gap:10px;margin-top:10px}
.delete-btn{background:#ef4444;color:white;padding:5px 10px;border-radius:5px}
</style>
</head>
<body>

<div id="loginSection" class="container">
    <h2>ğŸ” MOSHARUTH LOGIN</h2>
    <input type="password" id="passInput" placeholder="Ingiza Password">
    <button onclick="checkLogin()">Ingia</button>
</div>

<div id="mainSection" class="container hidden">
    <h2>ğŸ“¡ MOSHARUTH WiFi</h2>
    <input type="text" id="custName" placeholder="Jina la Mteja">
    <input type="number" id="custAmount" placeholder="Kiasi (Tsh)">
    <input type="tel" id="custPhone" placeholder="Namba ya Simu">
    <button onclick="saveData()">ğŸ’¾ Hifadhi Mtandaoni</button>
    
    <div id="customerList">Pakia data...</div>
</div>

<script>
// Zile kodi zako za Firebase
const firebaseConfig = {
  apiKey: "AIzaSyDw5j_XYvLdqz7zAvJtSfOOEelfvkzjYqU",
  authDomain: "mosharuth-a466b.firebaseapp.com",
  databaseURL: "https://mosharuth-a466b-default-rtdb.firebaseio.com",
  projectId: "mosharuth-a466b",
  storageBucket: "mosharuth-a466b.firebasestorage.app",
  messagingSenderId: "571128004354",
  appId: "1:571128004354:web:3318c5239e2afb6644cc1b"
};

// Start Firebase
firebase.initializeApp(firebaseConfig);
const database = firebase.database();

// Login Function
function checkLogin() {
    if(document.getElementById('passInput').value === "goldnature44") {
        document.getElementById('loginSection').classList.add('hidden');
        document.getElementById('mainSection').classList.remove('hidden');
        loadData();
    } else {
        alert("âŒ Password Sio Sahihi!");
    }
}

// Save Data Function
function saveData() {
    const name = document.getElementById('custName').value;
    const amount = document.getElementById('custAmount').value;
    const phone = document.getElementById('custPhone').value;

    if(name && amount && phone) {
        database.ref('wateja').push({
            jina: name,
            kiasi: amount,
            namba: phone,
            muda: new Date().toLocaleString('sw-TZ')
        });
        // Clear Inputs
        document.getElementById('custName').value = "";
        document.getElementById('custAmount').value = "";
        document.getElementById('custPhone').value = "";
    } else {
        alert("âš ï¸ Tafadhali jaza nafasi zote!");
    }
}

// Load Data in Realtime
function loadData() {
    database.ref('wateja').on('value', (snapshot) => {
        const listDiv = document.getElementById('customerList');
        listDiv.innerHTML = "";
        const data = snapshot.val();
        
        if(data) {
            Object.keys(data).reverse().forEach(key => {
                const user = data[key];
                listDiv.innerHTML += `
                    <div class="card">
                        <b>ğŸ‘¤ ${user.jina}</b><br>
                        ğŸ’° Tsh ${user.kiasi}<br>
                        ğŸ“ ${user.namba}<br>
                        <small>ğŸ“… ${user.muda}</small><br>
                        <div class="flex">
                            <button onclick="window.open('https://wa.me/${user.namba}')" style="background:#25D366;color:white">WhatsApp</button>
                            <button class="delete-btn" onclick="deleteCustomer('${key}')">Futa</button>
                        </div>
                    </div>
                `;
            });
        } else {
            listDiv.innerHTML = "<p style='text-align:center'>Hakuna data bado.</p>";
        }
    });
}

function deleteCustomer(id) {
    if(confirm("Je, una uhakika unataka kufuta?")) {
        database.ref('wateja/' + id).remove();
    }
}
</script>

</body>
</html>
